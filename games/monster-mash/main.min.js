(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){"use strict";var BootState=require("./states/Boot"),PreloadState=require("./states/Preload"),TitleState=require("./states/Title"),Howto=require("./states/Howto"),Game=require("./states/Game"),Score=require("./states/Score");window.onload=function(){Phaser.Plugin.ScreenShake=function(game,parent){Phaser.Plugin.call(this,game,parent);this.screenShakes=0;this.shakedAt=0};Phaser.Plugin.ScreenShake.prototype=Object.create(Phaser.Plugin.prototype);Phaser.Plugin.ScreenShake.prototype.constructor=Phaser.Plugin.ScreenShake;Phaser.Plugin.ScreenShake.prototype.start=function(count){if(this.game.time.now-this.shakedAt<200){return}this.shakedAt=this.game.time.now;this.screenShakes=count;if(window.navigator&&window.navigator.vibrate){navigator.vibrate(count*10)}};Phaser.Plugin.ScreenShake.prototype.postUpdate=function(){if(this.screenShakes>0){this.screenShakes--;var amt=this.screenShakes*.5;if(this.screenShakes%2){this.game.camera.y+=amt}else{this.game.camera.y-=amt}this.game.camera.displayObject.position.y=-this.game.camera.view.y}}};var game,width=900,height=600,renderMode=Phaser.AUTO;game=new Phaser.Game(width,height,renderMode,"");game.state.add("boot",BootState);game.state.add("preload",PreloadState);game.state.add("title",TitleState);game.state.add("howto",Howto);game.state.add("game",Game);game.state.add("score",Score);game.state.start("boot")},{"./states/Boot":2,"./states/Game":3,"./states/Howto":4,"./states/Preload":5,"./states/Score":6,"./states/Title":7}],2:[function(require,module,exports){"use strict";function Boot(){}Boot.prototype={preload:function(){this.load.image("preloadSprite","assets/images/preloadSprite.png")},create:function(){this.game.input.maxPointers=1;this.game.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL;this.game.scale.setMinMax(120,80,900,600);this.game.scale.pageAlignHorizontally=true;this.game.scale.pageAlignVertically=true;this.game.scale.refresh();this.game.stage.backgroundColor="#fff";this.game.state.start("preload")}};module.exports=Boot},{}],3:[function(require,module,exports){"use strict";function Game(){}Game.prototype={init:function(){this.score=0;this.currentLevel={};this.currentLevel.level=1;this.currentLevel.changeKey=false;this.currentLevel.meterAmt=0;this.currentLevel.over=false;this.oldScores=[]},preload:function(){this.hKey=this.game.input.keyboard.addKey(Phaser.Keyboard.H);this.jKey=this.game.input.keyboard.addKey(Phaser.Keyboard.J);this.kKey=this.game.input.keyboard.addKey(Phaser.Keyboard.K);this.lKey=this.game.input.keyboard.addKey(Phaser.Keyboard.L);this.spaceKey=this.game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR);this.pKey=this.game.input.keyboard.addKey(Phaser.Keyboard.P)},create:function(){this.game.world.setBounds(-100,-100,1e3,700);this.background=this.game.add.sprite(this.game.width/2,this.game.height/2,"bedroom");this.background.anchor.set(.5,.5);this.demon=this.game.add.sprite(this.game.width/2+120,this.game.height/2,"demon");this.demon.animations.add("idle",[0,2,1,2],4);this.bed=this.game.add.sprite(this.game.width/2-60,this.game.height/2-60,"bed");this.sleeper=this.game.add.sprite(this.game.width/2+35,this.game.height/2-60,"sleeper");this.sleeperScare=this.game.add.sprite(this.game.width/2+120,this.game.height/2-60,"sleeperScare");this.sleeperScare.animations.add("scared",[0,1,2],3);this.sleeperScare.anchor.set(.5,.5);this.sleeperScare.visible=false;this.demonScare=this.game.add.sprite(this.game.width/2+250,this.game.height/2-20,"demonScare");this.demonScare.animations.add("scare",[0,1,2,3,4],5);this.demonScare.anchor.set(.5,.5);this.demonScare.visible=false;this.overlay=this.game.add.sprite(this.game.width/2,this.game.height/2,"darkness");this.overlay.anchor.set(.5,.5);this.scoreboard=this.game.add.text(20,40,"score: "+this.score,{font:"20px monospace",fill:"#000"});this.roundboard=this.game.add.text(this.game.width-100,40,"round: "+this.currentLevel.level,{font:"20px monospace",fill:"#000"});this.meterBackground=this.game.add.graphics(this.game.width/2-200,0);this.meterBackground.beginFill(13421772,1);this.meterBackground.bounds=new PIXI.Rectangle(0,10,400,20);this.meterBackground.drawRect(0,10,400,20);this.meterBackground.boundsPadding=0;this.meter=this.game.add.graphics(this.game.width/2-200,0);this.meter.beginFill(16711935,1);this.meter.bounds=new PIXI.Rectangle(0,10,400,20);this.meter.drawRect(0,10,400,20);this.meter.boundsPadding=0;this.keys=[this.game.add.sprite(this.game.width/2,40,"buttons",0),this.game.add.sprite(this.game.width/2,40,"buttons",1),this.game.add.sprite(this.game.width/2,40,"buttons",2),this.game.add.sprite(this.game.width/2,40,"buttons",3)];for(var key in this.keys){this.keys[key].visible=false}this.key=this.game.add.sprite(this.game.width/2,40,"buttons",0);this.key.anchor.set(.5,0);this.key.animations.add("pressed",[4,0],12,false);this.key.visible=false;this.roar=this.game.add.sound("roar",2);this.game.camera.follow(this.background);this.changingKey();var screenShake=this.game.plugins.add(Phaser.Plugin.ScreenShake);this.game.plugins.screenShake=screenShake},update:function(){this.currentLevel.meterAmt*=.99;this.demon.animations.play("idle");if(this.keyValue===0&&this.hKey.isDown&&this.hKey.duration<=10&&!this.currentLevel.over){this.key.animations.play("pressed");if(this.currentLevel.meterAmt<=380){this.currentLevel.meterAmt+=20}else{this.currentLevel.meterAmt+=400-this.currentLevel.meterAmt}}else if(this.keyValue===1&&this.jKey.isDown&&this.jKey.duration<=10&&!this.currentLevel.over){this.key.animations.play("pressed");if(this.currentLevel.meterAmt<=380){this.currentLevel.meterAmt+=20}else{this.currentLevel.meterAmt+=400-this.currentLevel.meterAmt}}else if(this.keyValue===2&&this.kKey.isDown&&this.kKey.duration<=10&&!this.currentLevel.over){this.key.animations.play("pressed");if(this.currentLevel.meterAmt<=380){this.currentLevel.meterAmt+=20}else{this.currentLevel.meterAmt+=400-this.currentLevel.meterAmt}}else if(this.keyValue===3&&this.lKey.isDown&&this.lKey.duration<=10&&!this.currentLevel.over){this.key.animations.play("pressed");if(this.currentLevel.meterAmt<=380){this.currentLevel.meterAmt+=20}else{this.currentLevel.meterAmt+=400-this.currentLevel.meterAmt}}else if(this.spaceKey.isDown&&this.spaceKey.duration<=10&&this.currentLevel.meterAmt>0&&!this.currentLevel.over){this.roar.play();this.overlay.visible=false;this.demon.visible=false;this.sleeper.visible=false;this.sleeperScare.visible=true;this.demonScare.visible=true;this.sleeperScare.animations.play("scared",3,true);this.demonScare.animations.play("scare",5,true);this.game.time.events.add(Phaser.Timer.SECOND*1,this.returnOverlay,this).autoDestroy=true;this.game.plugins.screenShake.start(70);this.doScoring();this.currentLevel.over=true}if(this.currentLevel.changeKey){this.key.visible=false;this.keyValue=Math.floor(Math.random()*3);this.key=this.keys[this.keyValue];this.key.anchor.set(.5,0);this.key.visible=true;this.key.animations.add("pressed",[this.keyValue+4,this.keyValue],12,false);this.currentLevel.changeKey=false}this.meter.width=this.currentLevel.meterAmt;if(this.currentLevel.over){this.sceneChange()}},paused:function(){},render:function(){},shutdown:function(){},returnOverlay:function(){this.overlay.visible=true;this.demonScare.visible=false;this.sleeperScare.visible=false;this.sleeper.visible=true;this.demon.visible=true},changingKey:function(){this.game.time.events.add(Phaser.Timer.SECOND*(Math.random()*3+1),this.changingKey,this).autoDestroy=true;this.currentLevel.changeKey=true},doScoring:function(){var painLevel=this.currentLevel.meterAmt;this.currentLevel.meterAmt=0;this.score+=Math.floor(painLevel*35);this.oldScores.push(this.score);this.scoreboard.text="score: "+this.score;if(this.currentLevel.level===3){this.game.state.start("score",true,false,this.score)}},sceneChange:function(){this.currentLevel.level+=1;this.roundboard.text="round: "+this.currentLevel.level;this.currentLevel.changeKey=false;this.currentLevel.over=false}};module.exports=Game},{}],4:[function(require,module,exports){"use strict";function Howto(){}Howto.prototype={init:function(){},preload:function(){},create:function(){this.background=this.game.add.sprite(this.game.width/2,this.game.height/2,"bedroom");this.background.anchor.set(.5,.5);this.demon=this.game.add.sprite(this.game.width/2+120,this.game.height/2,"demon");this.demon.animations.add("idle",[0,2,1,2],4);this.demon.animations.play("idle",4,true);this.bed=this.game.add.sprite(this.game.width/2-60,this.game.height/2-60,"bed");this.sleeper=this.game.add.sprite(this.game.width/2+35,this.game.height/2-60,"sleeper");this.overlay=this.game.add.sprite(this.game.width/2,this.game.height/2,"darkness");this.overlay.anchor.set(.5,.5);this.titleText=this.game.add.text(this.game.width/2,this.game.height/4,"Monster Mash!",{font:"60px monospace",fill:"#fff",align:"center"});this.titleText.anchor.set(.5,.5);this.instructions=this.game.add.text(this.game.width/2,this.game.height/2,"A button will display on the screen,\nand you will have to mash it to charge your meter.\nOnce it is charged high enough,\npress spacebar to release your inner demon.\nOnly then will you become promoted\nto chief scaring officer at Shocko Corp.\n\nYou are scored over 3 rounds of scares!",{font:"15px monospace",fill:"#fff",align:"center"});this.instructions.anchor.set(.5,.5);this.backBtn=this.game.add.text(this.game.width/2,this.game.height/4*3,"Back",{fill:"#fff",align:"center"});this.backBtn.anchor.set(.5,.5);this.backBtn.inputEnabled=true;this.backBtn.events.onInputOver.add(this.btnOver,this);this.backBtn.events.onInputOut.add(this.whiteBtnOut,this);this.backBtn.events.onInputDown.add(this.backDown,this)},update:function(){},paused:function(){},render:function(){},shutdown:function(){},btnOver:function(elm){elm.fill="#00F"},whiteBtnOut:function(elm){elm.fill="#fff"},btnOut:function(elm){elm.fill="#000"},backDown:function(){this.game.state.start("title")}};module.exports=Howto},{}],5:[function(require,module,exports){"use strict";function Preload(){this.preloadSprite=null;this.ready=false;this.assetsUri={images:"assets/images/",sounds:"assets/sounds/"}}Preload.prototype={preload:function(){this.preloadSprite=this.add.sprite(this.game.width/2,this.game.height/2,"preloadSprite");this.preloadSprite.anchor.setTo(.5,.5);this.load.onLoadComplete.addOnce(this.onLoadComplete,this);this.load.setPreloadSprite(this.preloadSprite);this.preloadImages();this.preloadSounds()},create:function(){this.preloadSprite.cropEnabled=false},update:function(){if(!!this.ready){this.music=this.game.add.sound("background",.5,true);this.music.play();this.game.state.start("title")}},onLoadComplete:function(){this.ready=true},preloadImages:function(){this.load.image("bedroom",this.assetsUri.images+"room.png");this.load.image("sleeper",this.assetsUri.images+"sleeper.png");this.load.image("darkness",this.assetsUri.images+"shadow.png");this.load.spritesheet("demon",this.assetsUri.images+"monsters.png",150,100);this.load.image("bed",this.assetsUri.images+"bed.png");this.load.spritesheet("signs",this.assetsUri.images+"signs.png",160,80);this.load.spritesheet("buttons",this.assetsUri.images+"buttons.png",80,80);this.load.image("spinner",this.assetsUri.images+"load-spinner.gif");this.load.spritesheet("demonScare",this.assetsUri.images+"monsterScare.png",150,210);this.load.spritesheet("sleeperScare",this.assetsUri.images+"sleeperScare.png",150,140)},preloadSounds:function(){this.game.load.audio("background",[this.assetsUri.sounds+"bg.ogg"]);this.game.load.audio("roar",[this.assetsUri.sounds+"roar.mp3"])}};module.exports=Preload},{}],6:[function(require,module,exports){"use strict";function Score(){}Score.prototype={init:function(score){this.score=score||0},preload:function(){},create:function(){this.title=this.game.add.text(this.game.width/2,this.game.height/5,"Your score:",{font:"40px monospace",align:"center"});this.scoreText=this.game.add.text(this.game.width/2,this.game.height/4+20,this.score,{font:"80px monospace",align:"center"});this.backBtn=this.game.add.text(this.game.width/2,this.game.height/5*4,"back",{font:"30px monospace",align:"center"});this.title.anchor.setTo(.5,.5);this.scoreText.anchor.setTo(.5,.5);this.backBtn.anchor.setTo(.5,.5);this.backBtn.inputEnabled=true;this.backBtn.events.onInputOver.add(this.btnOver,this);this.backBtn.events.onInputOut.add(this.btnOut,this);this.backBtn.events.onInputDown.add(this.backDown,this);this.spinner=this.game.add.sprite(this.game.width/2,this.game.height/2,"spinner");this.spinner.anchor.setTo(.5,.5);this.demon=this.game.add.sprite(this.game.width/2,this.game.height/2,"demonScare");this.demon.anchor.setTo(.5,.25);this.demon.scale.setTo(4,4);this.demon.visible=false;this.demon.animations.add("scareDemRealGood",[0,1,2,3,4],5);this.roar=this.game.add.sound("roar",2);this.game.time.events.add(Phaser.Timer.SECOND*15,this.scareDem,this).autoDestroy=true},update:function(){this.spinner.angle+=5},paused:function(){},render:function(){},shutdown:function(){},scareDem:function(){this.demon.visible=true;this.demon.animations.play("scareDemRealGood",5,true);this.roar.play();this.game.time.events.add(Phaser.Timer.SECOND*2,this.done,this).autoDestroy=true},done:function(){this.demon.visible=false},btnOver:function(elm){elm.fill="#00F"},btnOut:function(elm){elm.fill="#000"},backDown:function(){this.game.state.start("title")}};module.exports=Score},{}],7:[function(require,module,exports){"use strict";function Title(){}Title.prototype={create:function(){this.background=this.game.add.sprite(this.game.width/2,this.game.height/2,"bedroom");this.background.anchor.set(.5,.5);this.demon=this.game.add.sprite(this.game.width/2+120,this.game.height/2,"demon");this.demon.animations.add("idle",[0,2,1,2],4);this.demon.animations.play("idle",4,true);this.bed=this.game.add.sprite(this.game.width/2-60,this.game.height/2-60,"bed");this.sleeper=this.game.add.sprite(this.game.width/2+35,this.game.height/2-60,"sleeper");this.overlay=this.game.add.sprite(this.game.width/2,this.game.height/2,"darkness");this.overlay.anchor.set(.5,.5);this.titleText=this.game.add.text(this.game.width/2,this.game.height/4,"Monster Mash!",{font:"60px monospace",fill:"#fff",align:"center"});this.titleText.anchor.set(.5,.5);this.playBtn=this.game.add.text(this.game.width/2,this.game.height/2,"Play",{fill:"#fff"});this.playBtn.anchor.set(.5,.5);this.playBtn.inputEnabled=true;this.playBtn.events.onInputOver.add(this.btnOver,this);this.playBtn.events.onInputOut.add(this.whiteBtnOut,this);this.playBtn.events.onInputDown.add(this.playDown,this);this.howToBtn=this.game.add.text(this.game.width/2,this.game.height/3*2,"How To",{fill:"#fff"});this.howToBtn.anchor.set(.5,.5);this.howToBtn.inputEnabled=true;this.howToBtn.events.onInputOver.add(this.btnOver,this);this.howToBtn.events.onInputOut.add(this.whiteBtnOut,this);this.howToBtn.events.onInputDown.add(this.howToDown,this);this.copyright=this.game.add.text(this.game.width/2,this.game.height-20,"@grotewold © 2015",{font:"20px monospace"});this.copyright.anchor.set(.5,.5);this.copyright.inputEnabled=true;this.copyright.events.onInputOver.add(this.btnOver,this);this.copyright.events.onInputOut.add(this.btnOut,this);this.copyright.events.onInputDown.add(this.copyrightDown,this)},btnOver:function(elm){elm.fill="#00F"},btnOut:function(elm){elm.fill="#000"},whiteBtnOut:function(elm){elm.fill="#fff"},howToDown:function(){this.game.state.start("howto")},playDown:function(){this.game.state.start("game")},copyrightDown:function(){window.open("http://github.com/grotewold","_blank")}};module.exports=Title},{}]},{},[1]);